{"version":3,"sources":["webpack:///./src/components/pages/LoginNew.vue?567d","webpack:///./src/components/pages/LoginNew.vue?530f","webpack:///./src/components/pages/LoginNew.vue","webpack:///./src/components/pages/LoginNew.vue?6993"],"names":["data","ruleForm","name","password","code","rules","required","message","trigger","mounted","console","log","this","$route","params","expire","$message","warning","localStorage","setItem","methods","vedioNewLogin","vedioLogin","then","res","JSON","stringify","login","$refs","validate","valid","pas","Buffer","toString","row","grant_type","username","scope","loginOs","msg","getUserInfo","$router","push","path","catch","e","id","_createElementVNode","autoplay","muted","class","src","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createVNode","_component_el_form","inline","model","$data","ref","label-width","_component_el_form_item","label","prop","_component_el_input","$event","placeholder","style","_hoisted_6","show-password","_hoisted_7","_component_el_button","size","type","onClick","$options","__exports__","render"],"mappings":"gHAAA,W,kCCAA,W,mCC6BA,wCAGe,QACbA,OACE,MAAO,CACLC,SAAU,CACRC,KAAM,GACNC,SAAU,GACVC,KAAM,IAERC,MAAO,CACLH,KAAM,CACJ,CAAEI,UAAU,EAAMC,QAAS,SAAUC,QAAS,SAEhDL,SAAU,CACR,CAAEG,UAAU,EAAMC,QAAS,QAASC,QAAS,YAkBrDC,UACEC,QAAQC,IAAIC,KAAKC,OAAOC,QACpBF,KAAKC,OAAOC,OAAOC,QACrBH,KAAKI,SAASC,QAAQ,kBAExBC,aAAaC,QAAQ,aAAc,OAErCC,QAAS,CACPC,gBACEC,iBAAaC,KAAKC,IAChBd,QAAQC,IAAIa,GACZN,aAAaC,QAAQ,aAAcM,KAAKC,UAAUF,EAAIxB,UAI1D2B,QACEf,KAAKgB,MAAM,YAAYC,SAAUC,IAC/B,IAAIA,EAiCF,OAAO,EAjCE,CACT,IAAIC,EAAM,IAAIC,EAAOpB,KAAKX,SAASE,UAAU8B,SAAS,UAClDC,EAAM,CACRC,WAAY,WACZC,SAAUxB,KAAKX,SAASC,KACxBC,SAAU4B,EACVM,MAAO,UAGTC,eAAQJ,GAAKX,KAAKC,IACA,GAAZA,EAAIpB,KACNQ,KAAKI,SAASC,QAAQO,EAAIe,MAE1BrB,aAAaC,QAAQ,WAAYM,KAAKC,UAAUF,IAChDZ,KAAKS,gBACLmB,iBAAcjB,KAAKC,IAOjBd,QAAQC,IAAIa,GACZN,aAAaC,QAAQ,WAAYM,KAAKC,UAAUF,EAAIxB,OACpDY,KAAK6B,QAAQC,KAAK,CAChBC,KAAM,yBAIXC,MAAMC,IACPjC,KAAKI,SAASC,QAAQ,oB,2MA7G3B6B,GAAG,a,QACNC,gCAA2E,SAApEC,SAAA,GAASC,MAAA,GAAMC,MAAM,aAAaC,IAAI,sB,aACxCL,GAAG,gB,QACNC,gCAGM,OAHDD,GAAG,QAAM,CACZC,gCAAuB,UAAnB,kBACJA,gCAAM,Q,YAERA,gCAAM,oB,QAKJA,gCAAM,oB,QAKNA,gCAAM,oB,kPAjBZK,gCAyBM,MAzBNC,EAyBM,CAxBJC,EACAP,gCAsBM,MAtBNQ,EAsBM,CArBJC,EAIAC,EACAC,yBAaUC,EAAA,CAbAC,QAAQ,EAAOC,MAAOC,EAAA7D,SAAWI,MAAOyD,EAAAzD,MAAO0D,IAAI,WAAWC,cAAY,K,8BAClF,IAEe,CAFfN,yBAEeO,EAAA,CAFDC,MAAM,GAAGC,KAAK,Q,8BAC1B,IAAkG,CAAlGT,yBAAkGU,EAAA,C,WAA/EN,EAAA7D,SAASC,K,qCAAT4D,EAAA7D,SAASC,KAAImE,GAAEC,YAAY,MAAMC,MAAA,+B,+BAEtDC,EACAd,yBAGeO,EAAA,CAHDC,MAAM,GAAGC,KAAK,Y,8BAC1B,IAC2B,CAD3BT,yBAC2BU,EAAA,CADjBE,YAAY,K,WAAcR,EAAA7D,SAASE,S,qCAAT2D,EAAA7D,SAASE,SAAQkE,GAAEE,MAAA,8BACrDE,gBAAA,I,+BAEJC,EACAhB,yBAEeO,EAAA,M,6BADb,IAAwG,CAAxGP,yBAAwGiB,EAAA,CAA7FC,KAAK,SAASC,KAAK,UAAUN,MAAA,8BAAoCO,QAAOC,EAAApD,O,8BAAO,IAAE,C,6BAAF,Q,uHCZpG,MAAMqD,EAA2B,IAAgB,OAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB","file":"js/chunk-3554d157.88b2ce41.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./LoginNew.vue?vue&type=style&index=0&id=b559ad94&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./LoginNew.vue?vue&type=style&index=1&id=b559ad94&lang=less&scoped=true\"","<template>\n  <div id=\"container\">\n    <video autoplay muted class=\"login-wrap\" src=\"/video/content.mp4\"> </video>\n    <div id=\"main_content\">\n      <div id=\"head\">\n        <h1>容东片区数字道路智能运营中心</h1>\n        <br />\n      </div>\n      <br />\n      <el-form :inline=\"true\" :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"0\">\n        <el-form-item label=\"\" prop=\"name\">\n          <el-input v-model=\"ruleForm.name\" placeholder=\"用户名\" style=\"width: 318px;height: 42px;\"></el-input>\n        </el-form-item>\n        <br />\n        <el-form-item label=\"\" prop=\"password\">\n          <el-input placeholder=\"密码\" v-model=\"ruleForm.password\" style=\"width: 318px;height: 42px;\"\n            show-password></el-input>\n        </el-form-item>\n        <br />\n        <el-form-item>\n          <el-button size=\"medium\" type=\"primary\" style=\"width: 318px;height: 42px;\" @click=\"login\">登录</el-button>\n        </el-form-item>\n      </el-form>\n\n\n    </div>\n  </div>\n</template>\n<script>\nimport { ElMessage } from 'element-plus'\nimport { vedioLogin } from '../../assets/js/api_video'\nimport { loginOs, getUserInfo } from '../../assets/js/api'\nexport default {\n  data() {\n    return {\n      ruleForm: {\n        name: '',\n        password: '',\n        code: ''\n      },\n      rules: {\n        name: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n        ],\n        // code: [\n        //   { required: true, message: '请输入验证码', trigger: 'blur' },\n        //   {\n        //     validator: (rule, value, cb) => {\n        //       if (+value === +this.identifyCodeVal) {\n        //         cb()\n        //       } else {\n        //         cb(new Error('验证码错误'))\n        //       }\n        //     },\n        //     trigger: 'blur'\n        //   }\n        // ]\n      },\n    }\n  },\n  mounted() {\n    console.log(this.$route.params)\n    if (this.$route.params.expire) {\n      this.$message.warning('身份验证已过期,请重新登录！');\n    }\n    localStorage.setItem('vedioToken', null)\n  },\n  methods: {\n    vedioNewLogin() {\n      vedioLogin().then(res => {\n        console.log(res)\n        localStorage.setItem('vedioToken', JSON.stringify(res.data))\n      })\n    },\n\n    login() {\n      this.$refs['ruleForm'].validate((valid) => {\n        if (valid) {\n          let pas = new Buffer(this.ruleForm.password).toString('base64')\n          let row = {\n            grant_type: 'password',\n            username: this.ruleForm.name,\n            password: pas,\n            scope: 'server'\n          }\n\n          loginOs(row).then(res => {\n            if (res.code == 1) {\n              this.$message.warning(res.msg);\n            } else {\n              localStorage.setItem('tokenObj', JSON.stringify(res))\n              this.vedioNewLogin()\n              getUserInfo().then(res => {\n                // ElMessage({\n                //   showClose: true,\n                //   message: '登录成功',\n                //   type: 'success',\n                //   duration: 500\n                // });\n                console.log(res)\n                localStorage.setItem('userInfo', JSON.stringify(res.data))\n                this.$router.push({\n                  path: '/roadPerception'\n                })\n              })\n            }\n          }).catch(e => {\n            this.$message.warning('网络不可用！');\n          })\n        } else {\n          return false\n        }\n      })\n    },\n\n  }\n}\n</script>\n<style>\ninput:-internal-autofill-previewed,\ninput:-internal-autofill-selected {\n  font-size: 16px;\n  -webkit-text-fill-color: #fff;\n  transition: background-color 5000s ease-out 0.5s;\n}\n</style>\n<style lang='less' scoped>\ninput {\n  font-size: 16px;\n  // 自动填充文本样式\n  &:-webkit-autofill::first-line {\n    font-size: 16px;\n  }\n}\n\n#container {\n  overflow: hidden;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  text-align: center;\n}\n\n/deep/ .el-input__inner {\n  color: #fff;\n  font-size: 16px;\n  font-family: Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif !important;\n}\n/deep/ .el-input__wrapper {\n  background-color: hsla(0,0%,100%,.2) !important;\n  color: #fff;\n}\n.login-wrap {\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  position: fixed;\n  object-fit: fill;\n  font-size: 22px;\n  overflow: hidden;\n  z-index: -99;\n}\n\n#main_content {\n  z-index: 2;\n  position: relative;\n  display: inline-block;\n\n  /* Vertical center */\n  top: 50%;\n  transform: translateY(-50%);\n  margin: 0 auto !important;\n}\n\n#main_content h1 {\n  text-transform: uppercase;\n  font-weight: 600;\n  color: #fff;\n  font-size: 35px;\n}\n</style>\n","import { render } from \"./LoginNew.vue?vue&type=template&id=b559ad94&scoped=true\"\nimport script from \"./LoginNew.vue?vue&type=script&lang=js\"\nexport * from \"./LoginNew.vue?vue&type=script&lang=js\"\n\nimport \"./LoginNew.vue?vue&type=style&index=0&id=b559ad94&lang=css\"\nimport \"./LoginNew.vue?vue&type=style&index=1&id=b559ad94&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/limeiwang/telecom/qianhai/nationalproject5/ico_fe/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b559ad94\"]])\n\nexport default __exports__"],"sourceRoot":""}